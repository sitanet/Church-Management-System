{% extends 'coordinators/base.html' %}

{% load static %}

{% block content %}
<div class="midde_cont">
   <div class="container-fluid">
      <div class="row column_title">
         <div class="col-md-12">
            <div class="page_title">
               <h2>List of Career</h2>
            </div>
         </div>
      </div>

      <!-- table -->
      <div class="col-md-12">
         <div class="white_shd full margin_bottom_30">
            <div class="table_section padding_infor_info">
               <div class="table-responsive-sm">
                  <div class="input-group mb-1">
                     <input type="text" class="form-control bg-light" placeholder="Search..." id="searchInput">
                     <div class="">
                        <button class="btn" style="background-color: #FF4500;" type="button" onclick="searchTable()">Search</button>
                     </div>
                  </div>
                  <table class="table">
                     <thead class="thead-dark">
                        <tr>
                           <th>Firstname</th>
                           <th>Lastname</th>
                           <th>Action</th>
                        </tr>
                     </thead>
                     <tbody>
                        {% for career in careers %}
                        <tr>
                           <td>{{ career.member.first_name }}</td>
                           <td>{{ career.member.last_name }}</td>
                           <td>
                              <a href="{% url 'career_detail' career.pk %}" style="font-weight: bold; color: blue;">View Details</a> /
                              <a href="{% url 'career_delete' career.pk %}" style="font-weight: bold; color: red;" onclick="return confirm('Are you sure you want to delete this career?');">Delete</a>
                           </td>
                        </tr>
                        {% endfor %}
                     </tbody>
                  </table>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

<script>
function searchTable() {
    var input, filter, table, tr, td, i, j, txtValue;
    input = document.getElementById("searchInput");
    filter = input.value.toLowerCase();
    table = document.querySelector(".table");
    tr = table.getElementsByTagName("tr");
    
    for (i = 1; i < tr.length; i++) { // Skip the first row (headers)
        tr[i].style.display = "none"; // Initially hide the row
        td = tr[i].getElementsByTagName("td");
        for (j = 0; j < td.length; j++) {
            if (td[j]) {
                txtValue = td[j].textContent || td[j].innerText;
                if (txtValue.toLowerCase().indexOf(filter) > -1) {
                    tr[i].style.display = ""; // Show the row if it matches
                    break; // Break the loop once a match is found
                }
            }
        }
    }
}
</script>
{% endblock %}
